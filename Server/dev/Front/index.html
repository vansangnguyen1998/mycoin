<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>מטבע וירטואלי יהודי</title>
    <meta name="description" content="Dự án chuỗi khối - Mor Cohen">
    <meta name="keywords" content="Chuỗi khối, dự án, chuỗi khối, tiền ảo jewish, tiền ảo Do Thái, Mor Cohen">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js" integrity="sha384-kW+oWsYx3YpxvjtZjFXqazFpA7UP/MbiY4jvs+RWZo2+N94PFZ36T6TFkc9O3qoB" crossorigin="anonymous"></script>

    <script src="https://unpkg.com/mathjs@5.2.2/dist/math.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i,600|Montserrat:200,300,400" rel="stylesheet">
    <link rel="stylesheet" href="./assets/css/bootstrap/bootstrap.css">

    <link rel="stylesheet" href="./assets/fonts/fontawesome/css/font-awesome.min.css">

    <link href="assets/css/style1.css" rel="stylesheet" />
    <script src="assets/js/modernizr.js"></script>

    <link rel="stylesheet" href="./assets/css/slick.css">
    <link rel="stylesheet" href="./assets/css/slick-theme.css">
    <link rel="stylesheet" href="./assets/css/helpers.css">
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/css/landing-2.css">
</head>
<body data-spy="scroll" data-target="#pb-navbar" data-offset="200" dir="rtl" ng-app="BlockExplorer">
    <nav class="navbar navbar-expand-lg navbar-dark pb_navbar pb_scrolled-light" id="pb-navbar">
        <div class="container">
            <a class="navbar-brand" href="#firstSection"><img src="./assets/images/logo_blockchain.png"><img /></a>
            <button class="navbar-toggler mr-auto" type="button" data-toggle="collapse" data-target="#probootstrap-navbar" aria-controls="probootstrap-navbar" aria-expanded="false" aria-label="Toggle navigation">תפריט</button>
            <div class="collapse navbar-collapse" id="probootstrap-navbar">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item"><a class="nav-link" href="#section-home">Block Explorer</a></li>
                    <li class="nav-item"><a class="nav-link" href="#section-features">Ví của tôi</a></li>
                    <li class="nav-item"><a class="nav-link" href="#makeTransaction">Làm cho một thỏa thuận</a></li>
                    <li class="nav-item"><a class="nav-link" href="#lastTransactions" style="color:gold !important;"><i class="fas fa-coins"></i> khai thác mỏ</a></li>
                    <li class="nav-item"><a class="nav-link" href="#about">Về dự án</a></li>

                    <li class="nav-item cta-btn ml-xl-2 ml-lg-2 ml-md-0 ml-sm-0 ml-0"><a class="nav-link" href="" target="_blank" data-toggle="modal" data-target="#inviteModal"><span class="pb_rounded-4 px-4">צרף חבר חדש</span></a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Modal -->
    <div class="modal fade text-center py-5 subscribeModal-lg" id="inviteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" ng-controller="inviteController">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="top-strip"></div>
                    <h3 class="pt-5 mb-0 text-secondary">Mời một thành viên mạng lưới!</h3>
                    <p class="pb-1 text-muted"><small>Gửi lời mời cho một người bạn và khi anh ấy đăng ký, bạn sẽ nhận được 50 xu vào ví kỹ thuật số của mình!</small></p>
                    <form>
                        <div class="input-group mb-3 w-75 mx-auto">
                            <input type="text" class="form-control" placeholder="הזן כאן את כתובת המייל של המוזמן" aria-label="Recipient's username" aria-describedby="button-addon2" ng-model="email">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="button" id="button-addon2" ng-click="checkeys(email)"><i class="fa fa-paper-plane" style="color: #fff;"></i></button>
                            </div>
                        </div>
                    </form>

                    <small><mark>Vui lòng mang theo khóa riêng tư và công khai để xác minh.</mark></small>
                    <p class="pb-1 text-muted"><small>Địa chỉ email không được lưu trữ trong hệ thống và chỉ cần thiết để gửi đơn đặt hàng.</small></p>
                    <div class="bottom-strip"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- END nav -->

    <section class="pb_cover_v3 overflow-hidden text-right pb_gradient_v1" style="background: #262f36; padding-top: 50px;" id="firstSection">
        <div class="container">



            <div class="row align-items-center justify-content-center">
                <div class="col">
                    <div class="row">
                        <h2 style="color: white; font-size:x-large">Chào mừng,&nbsp;</h2>
                        <h2 style="color: gold; font-size:x-large" id="noMemberID"></h2>
                    </div>
                    <h2 style="color: white;">Bạn hiện đã kết nối với mạng blockchain jewCOIN</h2>
                    <p class="alert alert-light no-data-text" style="outline: 2px dotted #639ce4">
                        <span style="font-weight: bold;"><i class="fas fa-chalkboard-teacher"></i> Lần đầu tiên? - </span> <a href="#" id="cd-tour-trigger" style="color: #6166ed; font-weight: bold; font-style: italic;">Bấm vào đây</a> Đối với một chuyến tham quan ảo có hướng dẫn.
                    </p>
                    <p style="color: white;">* Nhắc nhở: Không chia sẻ khóa cá nhân được cung cấp khi đăng ký!</p>

                    <div class="container" style="padding-top: 0px;">
                        <hr style="background-color: #262f36" />
                        <div class="row">
                            <h5 class="col-6" style="color: #fff;"><i class="fas fa-comments"></i>trò chuyện</h5>
                            <p class="col-6 text-left" style="color: gold">Từ bây giờ, bạn có thể xem các tin nhắn được gửi trực tuyến</p>
                        </div>
                        <div class="row">
                            <div class="panel-body" style="overflow:auto; overflow-x:hidden; border-radius: 15px; box-shadow: 2px 5px 5px rgba(0, 0, 0, 0.10);">
                                <ul class="chat" id="chat">
                                    <li class="right clearfix">
                                        <div class="chat-body clearfix">
                                            <div class="header">
                                                <p class="pull-right primary-font" style="color: gold">thông báo hệ thống </p>
                                            </div><br />
                                            <p>
                                                Xin chào, từ bây giờ bạn sẽ có thể xem tin nhắn nhận được trong trò chuyện trong thời gian thực.<br />
                                                Viết tin nhắn vào hộp văn bản và nhấp vào "Gửi" để hiển thị tin nhắn cho những người dùng được kết nối khác.<br />
                                                <small>* Tin nhắn không được lưu và xóa sau khi rời khỏi trình duyệt. Tin nhắn sẽ chỉ được hiển thị cho người đã đăng nhập tại thời điểm gửi tin nhắn.</small>
                                            </p>
                                        </div>
                                    </li>

                                </ul>
                            </div>
                            <br />
                            <div class="input-group" style="padding-top:5px;">
                                <input id="btn-input" style="background-color: #f2f2f2; border-radius: 5px; box-shadow: 2px 5px 5px rgba(0, 0, 0, 0.10);" type="text" class="form-control input-sm" placeholder="הכנס הודעה" name="message" />
                                <span class="input-group-btn">
                                    <button class="btn btn-primary btn-sm" style="box-shadow: 2px 5px 5px rgba(0, 0, 0, 0.10); height:40px; padding-right:50px; padding-left:50px;" id="btn-chat" onclick="sendMessage(document.getElementById('btn-input').value)">
                                        שלח
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <ul class="cd-tour-wrapper">
        <li class="cd-single-step">
            <span>Step 1</span>

            <div class="cd-more-info right">
                <h3>bước một</h3>
                <p>Đây là cuộc trò chuyện - mọi người có thể gửi tin nhắn và yêu cầu lời mời nếu bạn chưa được mời.</p>
            </div>
        </li>

        <li class="cd-single-step">
            <span>Step 2</span>

            <div class="cd-more-info bottom">
                <h2>Cấp độ thứ hai</h2>
                <p>Đây là ví của bạn - tại đây bạn có thể nhập khóa công khai mà bạn nhận được khi đăng ký và xem các giao dịch trong tài khoản.</p>
            </div>
        </li>

        <li class="cd-single-step">
            <span>Step 3</span>

            <div class="cd-more-info left">
                <h2>giai đoạn thứ ba</h2>
                <p>Giao dịch - Tại đây bạn có thể chuyển tiền từ ví cá nhân của mình sang ví của người dùng khác.</p>
                <p>Tất cả các trường phải được nhập và khi kết thúc giao dịch, nó sẽ được chuyển đến bộ phận "Giao dịch đang chờ xử lý" (bước tiếp theo)</p>
            </div>
        </li>

        <li class="cd-single-step">
            <span>Step 4</span>

            <div class="cd-more-info right">
                <h2>Giai đoạn thứ tư</h2>
                <p>Các giao dịch đang chờ khai thác - Mọi giao dịch được thực hiện sẽ di chuyển đến đây và đợi bất kỳ người dùng nào trên mạng nhấp vào nút khai thác và do đó "chấp thuận" các giao dịch này.</p>
            </div>
        </li>
    </ul>
    <!-- END section -->


    <section class="pb_cover_v3 overflow-hidden cover-bg-indigo cover-bg-opacity text-right pb_gradient_v3 pb_slant-light" id="section-home">
        <div class="container" ng-controller="searchInBlockchainController">
            <div class="row align-items-center justify-content-center">
                <div class="col-md-6">
                    <h2 class="heading">Block Explorer</h2>
                    <h2 style="color: white;">Tìm kiếm trên chuỗi khối</h2>
                    <div class="sub-heading">
                        <p class="mb-4">Block Explorer - như được ngụ ý bởi chính từ này, nó thực sự là một "trình khám phá khối". Một hệ thống blockchain bao gồm các khối, do đó trong mỗi khối có một bản ghi của tất cả các giao dịch được thực hiện trong khối. Tại đây chúng ta có thể thực hiện tìm kiếm theo "Block ID", "User Public Key", "Transaction ID".</p>
                        <p class="mb-5"><a class="btn btn-success btn-lg pb_btn-pill smoothscroll" href="#lastTransactions"><span class="pb_font-14 text-uppercase pb_letter-spacing-1"><span>Xem các giao dịch gần đây và bắt đầu quá trình khai thác!</span></span></a></p>

                    </div>
                </div>
                <div class="col-md-1">
                </div>
                <div class="col-md-5 relative align-self-center">
                    <img id="bc_white_png" class="bc_white_png" src="assets/images/bc_white.png" alt="image error" />
                    <form ng-submit="search(searchValue)" class="bg-white rounded pb_form_v1" style="position:relative">
                        <div class="form-group">
                            <input type="text" class="form-control pb_height-50 reverse" placeholder="Nhập địa chỉ được mã hóa tại đây" ng-model="searchValue">
                        </div>
                        <div class="form-group">
                            <div class="pb_select-wrap">
                                <select class="form-control pb_height-50 reverse" ng-model="searchType">
                                    <option value="" selected>Tìm kiếm bởi</option>
                                    <option value="block">ID khối</option>
                                    <option value="transaction">ID giao dịch</option>
                                    <option value="address">Khóa công khai - Tất cả các giao dịch được thực hiện bởi người dùng này</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="submit" class="btn btn-primary btn-lg btn-block pb_btn-pill btn-shadow-strong" value="Bấm để tìm kiếm" data-toggle="modal" data-target="#BEModal">
                        </div>
                        <p ng-if="!block && !transaction && !addressData && initialSearchMade" class="no-data-text">
                            Không có kết quả được tìm thấy.
                        </p>
                    </form>
                    <!-- Modal -->
                    <div class="modal fade" id="BEModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Block Explorer</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">


                                    <div class="row">
                                        <div class="col-md-10 offset-md-2">

                                            <span ng-if="!block && !transaction && !addressData && initialSearchMade">
                                                Không có kết quả được tìm thấy
                                            </span>

                                            <!-- 'display block' table -->
                                            <h3 class="table-title" ng-if="block">Tìm kiếm bằng ID khối</h3>
                                            <table class="table table-striped" ng-if="block">
                                                <tbody>
                                                    <tr>
                                                        <td class="bold">ID khối:</td>
                                                        <td><small>{{ block.hash }}</small></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="bold">mục lục:</td>
                                                        <td>{{ block.index }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="bold">Dấu thời gian:</td>
                                                        <td>{{ block.timestamp }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="bold">ngày và giờ:</td>
                                                        <td><small>{{ block.date }}</small></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="bold">Nonce:</td>
                                                        <td>{{ block.nonce }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="bold">ID khối trước đó:</td>
                                                        <td>{{ block.previousBlockHash }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="bold">Số lượng giao dịch:</td>
                                                        <td>{{ block.transactions.length }} <a href="#" style="color:#6678ed">&nbsp; <small>הצג את כל Các giao dịch trong khối</small></a></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <!-- end 'display block' table -->
                                            <!-- 'display transaction' table -->
                                            <h3 class="table-title" ng-if="transaction">Tìm kiếm theo ID / số giao dịch</h3>
                                            <table class="table table-striped" ng-if="transaction">
                                                <tbody>
                                                    <tr>
                                                        <td class="bold">người gửi</td>
                                                        <td>{{ transaction.sender }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="bold">người nhận:</td>
                                                        <td>{{ transaction.recipient }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="bold">Số lượng xu::</td>
                                                        <td>{{ transaction.amount }}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <!-- end 'display transaction' table -->
                                            <!-- 'display address' table -->
                                            <h3 class="table-title" ng-if="addressData">Tìm kiếm bằng khóa công khai</h3>
                                            <p ng-if="addressData">Hiển thị tất cả các giao dịch được thực hiện bởi người dùng:<small style="color: #1d82ff">{{searchValue}}</small></p>
                                            <p id="balance-text" ng-if="addressData"><mark>Số dư hiện tại: {{ addressData.addressBalance }}JCN</mark></p>
                                            <table class="table table-striped text-right" ng-if="addressData">
                                                <thead class="text-right">
                                                    <tr>
                                                        <th scope="col" class="text-right">người gửi:</th>
                                                        <th scope="col" class="text-right">người nhận:</th>
                                                        <th scope="col" class="text-right">Số lượng xu:</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="transaction in addressData.addressTransactions">
                                                        <td>{{ transaction.sender }}</td>
                                                        <td>{{ transaction.recipient }}</td>
                                                        <td>{{ transaction.amount }}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <!-- end 'display address' table -->

                                        </div>
                                    </div>


                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">đóng cửa</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- END section -->

    <section class="pb_section bg-light pb_slant-white pb_pb-250" id="section-features">
        <div class="container" ng-controller="walletController" style="padding-bottom: 150px; padding-top: 150px;">
            <div class="row justify-content-center mb-2">
                <div class="col-md-6 text-center mb-2">
                    <h2>הארנק שלי</h2>
                    <h5 class="text-uppercase pb_font-15 mb-2 pb_color-dark-opacity-3 pb_letter-spacing-2">
                        <strong>Xem thông tin cập nhật về ví của bạn</strong>
                    </h5>
                </div>
            </div>
            <form ng-submit="search(searchValue)">
                <div class="form-group">
                    <input type="text" class="form-control pb_height-50" placeholder="Nhập khóa công khai của bạn tại đây" ng-model="searchValue" ng-disabled="dis">
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-7"><input type="submit" id="myBtn" class="btn btn-secondary align-items-center " value="הצג מידע" data-toggle="collapse" data-target="#collapseWallet" aria-expanded="false" aria-controls="collapseWallet" ng-disabled="dis"></div>
                        <div class="col-5">Khóa công khai là mã được mã hóa<span style="font-weight: bold">Thư hai</span>Tặng cho bạn khi bạn đăng ký trang web</div>
                    </div>
                </div>
            </form>
            <div class="row">
                <div class="collapse" id="collapseWallet">
                    <div class="row">
                        <div class="col-6">
                            <div ng-if="addressData" class="card card-body ">

                                <h3 class="table-title" ng-if="addressData">Chi tiết các giao dịch</h3>
                                <p ng-if="addressData">Hiển thị tất cả các giao dịch được thực hiện bởi người dùng: <small style="color: #1d82ff">{{searchValue}}</small></p>
                                <p id="balance-text" ng-if="addressData"><mark>Số tiền còn dư và thừa: {{ addressData.addressBalance }} <small>JCN</small></mark></p>
                                <table class="table table-striped text-right" ng-if="addressData" style="display: inline; overflow: auto">
                                    <thead class="text-right">
                                        <tr>
                                            <th scope="col" class="text-right">người gửi:</th>
                                            <th scope="col" class="text-right">người nhận:</th>
                                            <th scope="col" class="text-right">Tổng:</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="transaction in addressData.addressTransactions">
                                            <td style="font-size:x-small; max-width: 220px;">{{ transaction.sender }}</td>
                                            <td style="font-size:x-small; max-width: 220px;">{{ transaction.recipient }}</td>
                                            <td style="font-size:x-small; max-width: 100px;">{{ transaction.amount }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>

                        <div class="col-6">

                            <div ng-if="addressData" class="card card-body ">

                                <h3 class="table-title" ng-if="addressData">Chi tiết các khoản chi phí gần đây</h3>
                                <p ng-if="addressData"><mark>Biểu đồ mô tả chi tiết các khoản thanh toán gần đây</mark></p>
                                <p id="balance-text" ng-if="addressData">Được sắp xếp theo ngày tháng và số tiền được người dùng gửi vào những ngày này: <small>{{searchValue}}</small></p>


                                <canvas ng-if="addressData" id="myChart" width="100" height="50"></canvas>
                                <script>

                                    document.getElementById("myBtn").addEventListener("click", displayChart);

                                    function displayChart() {
                                        setTimeout(function () {

                                            var dom_el = document.querySelector('[ng-controller="walletController"]');
                                            var ng_el = angular.element(dom_el);
                                            var ng_el_scope = ng_el.scope();
                                            var amounts = ng_el_scope.addressData;
                                            var transactions = amounts.addressTransactions;
                                            //console.log(ng_el_scope.addressData.addressBalance);
                                            //console.log(transactions[0].date);



                                            var ctx = document.getElementById("myChart").getContext('2d');
                                            var myLineChart = new Chart(ctx, {
                                                type: 'line',
                                                data: {
                                                    labels: [],
                                                    datasets: [{
                                                        label: 'יתרה בחשבון',
                                                        data: [],
                                                        borderWidth: 1
                                                    }]
                                                },
                                                options: {
                                                    scales: {
                                                        yAxes: [{
                                                            ticks: {
                                                                beginAtZero: false
                                                            }
                                                        }]
                                                    }
                                                }
                                            });

                                            for (var i = 0; i < transactions.length; i++) {
                                                myLineChart.data.datasets[0].data.push(ng_el_scope.addressData.amountArr[i]);
                                                myLineChart.data.labels.push(transactions[i].date);
                                                myLineChart.update();
                                            }
                                            //console.log(myLineChart);
                                        }, 1000);
                                    }

                                </script>

                                <a ng-if="addressData" href="#lastTransactions" class="text-left"><small>צפה בעסקאות אחרונות והתחל בתהליך כריה</small></a>

                            </div>

                        </div>

                        <div ng-if="!block && !transaction && !addressData && initialSearchMade" class="no-data-text">


                            <p><mark>Không tìm thấy kết quả nào cho khóa tìm kiếm ở trên: <small>{{searchValue}}</small></mark></p>

                        </div>

                    </div>
                </div>
            </div>
        </div>

    </section>
    <!-- END section -->




    <section class="pb_section pb_slant-light" id="makeTransaction">
        <div class="container" ng-controller="transactionController" ng-init="acceptedTransaction" style="padding-top: 100px;">
            <div class="row">
                <div class="col-lg-4 mb-5">
                    <img src="./assets/images/Blockchain.png" alt="Image placeholder" class="img-fluid">
                </div>
                <div class="col-lg-8 pl-md-5 pl-sm-0">
                    <div class="row">
                        <div class="col">
                            <h2>שלח JewCOIN's</h2>
                            <p class="pb_font-20">Chuyển tiền ảo (JCN) sang tài khoản khác</p>
                        </div>
                    </div>

                    <form name="sendCoins" novalidate>
                        <div class="row">
                            <div class="col-lg">

                                <div class="media pb_feature-v2 text-right mb-1 mt-5">
                                    <i class="fas fa-dollar-sign fa-1x"></i>
                                    <div class="media-body">
                                        <h3 class="mt-2 mb-2 heading">Số tiền được gửi</h3>
                                        <input type="text" name="amountToTransfer" class="form-control text-sans-serif" placeholder="לדוגמא: 50" ng-model="amountToTransfer" required>

                                    </div>
                                </div>

                                <div class="media pb_feature-v2 text-right mb-1 mt-5">
                                    <i class="fas fa-user-plus"></i>
                                    <div class="media-body">
                                        <h3 class="mt-2 mb-2 heading">Người gửi</h3>
                                        <input type="text" class="form-control text-sans-serif" placeholder="Nhập khóa công khai của bạn" name="pubKey" ng-model="pubKey" required>
                                    </div>
                                </div>

                            </div>
                            <div class="col-lg">

                                <div class="media pb_feature-v2 text-right mb-1 mt-5">
                                    <i class="fas fa-key fa-1x"></i>
                                    <div class="media-body">
                                        <h3 class="mt-2 mb-2 heading">privateKey</h3>
                                        <input type="text" class="form-control text-sans-serif" placeholder="Nhập khóa bí mật của bạn" name="privKey" ng-model="privKey" required>
                                    </div>
                                </div>
                                <div class="media pb_feature-v2 text-right mb-1 mt-5">
                                    <i class="fas fa-user-check"></i>
                                    <div class="media-body">
                                        <h3 class="mt-2 mb-2 heading">Người nhận</h3>
                                        <input type="text" class="form-control text-sans-serif" placeholder="Nhập khóa công khai của Người nhận" name="pubKeyOfRecipient" ng-model="pubKeyOfRecipient" required>
                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-7"></div>
                                    <div class="col-5">
                                        <div data-toggle="modal" data-target="#transactionModal">
                                            <a class="tip"><input type="submit" class="btn btn-success pb_btn-pill" value="Tạo một sự chuyển đổi" ng-click="transactionCoins(amountToTransfer, privKey, pubKey, pubKeyOfRecipient)" ng-disabled="sendCoins.amountToTransfer.$invalid || sendCoins.pubKey.$invalid || sendCoins.pubKeyOfRecipient.$invalid || sendCoins.privKey.$invalid"><div style="color: white" ng-hide="sendCoins.amountToTransfer.$valid && sendCoins.pubKey.$valid && sendCoins.pubKeyOfRecipient.$valid && sendCoins.privKey.$valid"><small>Nút sẽ hoạt động<span style="color: yellow">đến cái khác</span>Hoàn thành biểu mẫu</small></div></a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <span class="text-sans-serif text-right" ng-show="sendCoins.amountToTransfer.$touched && sendCoins.amountToTransfer.$invalid || sendCoins.pubKey.$touched && sendCoins.pubKey.$invalid || sendCoins.pubKeyOfRecipient.$touched && sendCoins.pubKeyOfRecipient.$invalid || sendCoins.privKey.$touched && sendCoins.privKey.$invalid"><mark> Để gửi biểu mẫu - bạn cần nhập tất cả các trường trong biểu mẫu</mark></span><br />
                        <span class="text-sans-serif text-right" ng-show="sendCoins.amountToTransfer.$touched && sendCoins.amountToTransfer.$invalid || sendCoins.pubKey.$touched && sendCoins.pubKey.$invalid || sendCoins.pubKeyOfRecipient.$touched && sendCoins.pubKeyOfRecipient.$invalid || sendCoins.privKey.$touched && sendCoins.privKey.$invalid"><small style="color: red; font-weight: bold; text-decoration: underline"> זוהו השגיאות הבאות:</small></span>
                        <br />
                        <span class="text-sans-serif text-right" ng-show="sendCoins.amountToTransfer.$touched && sendCoins.amountToTransfer.$invalid"><small>-Bắt buộc phải nhập số tiền để gửi</small></span>
                        <br />
                        <span class="text-sans-serif text-right" ng-show="sendCoins.pubKey.$touched && sendCoins.pubKey.$invalid"><small>-Bạn phải nhập khóa công khai của Người gửi</small></span>
                        <br />
                        <span class="text-sans-serif text-right" ng-show="sendCoins.pubKeyOfRecipient.$touched && sendCoins.pubKeyOfRecipient.$invalid"><small>-Bạn phải nhập khóa công khai của Người nhận</small></span>
                        <br />
                        <span class="text-sans-serif text-right" ng-show="sendCoins.privKey.$touched && sendCoins.privKey.$invalid"><small>- חובה להזין מפתח אישי של Người gửi</small></span>


                        <!-- Modal -->
                        <div class="modal fade" id="transactionModal" tabindex="-1" role="dialog" aria-labelledby="transactionModal" aria-hidden="true">

                            <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">אישור עסקה</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="card card-body ">

                                                <h3 class="table-title" ng-if="acceptedTransaction">Giao dịch đã hoàn tất thành công</h3>
                                                <p ng-if="acceptedTransaction" style="color: red; font-weight: bold">Lưu ý quan trọng: Các đồng tiền sẽ chỉ vào ví kỹ thuật số Người nhận sau khi khai thác bởi một trong những người dùng mạng</p>

                                                <!-- 'display transaction' table -->
                                                <h3 class="table-title" ng-if="acceptedTransaction">Lập hóa đơn:</h3>
                                                <table class="table table-striped" ng-if="acceptedTransaction">
                                                    <tbody>
                                                        <tr>
                                                            <td class="bold">שולח:</td>
                                                            <td>{{ pubKey }}</td>
                                                        </tr>
                                                        <tr>
                                                            <td class="bold">נמען:</td>
                                                            <td>{{ pubKeyOfRecipient }}</td>
                                                        </tr>
                                                        <tr>
                                                            <td class="bold">כמות מטבעות:</td>
                                                            <td>{{ amountToTransfer }}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <!-- end 'display transaction' table -->
                                                <a class="text-left" ng-if="acceptedTransaction"><mark>Tải xuống hóa đơn</mark></a>
                                                <h3 class="table-title" ng-if="declineTransaction">העסקה נכשלה</h3>
                                                <p ng-if="declineTransaction">מאחת הסיבות הבאות:</p>
                                                <ul ng-if="declineTransaction">
                                                    <li ng-if="declineTransaction">מפתח ציבורי של Người gửi/Người nhận לא הוזן כראוי</li>
                                                    <li ng-if="declineTransaction">מפתח פרטי של Người gửi אינו תואם למפתח הציבורי של Người gửi</li>
                                                    <li ng-if="declineTransaction">יתרתך אינה מספיקה על מנת להעביר ת סכום המטבעות המבוקש</li>
                                                    <li ng-if="declineTransaction">לא ניתן להעביר 0 מטבעות או פחות מזה</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">đóng cửa</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </form>

                </div>
            </div>
        </div>
    </section>
    <!-- END section -->


    <section class="pb_section bg-light pb_slant-white" id="lastTransactions">
        <div class="container" ng-controller="pendingTransactionsController" style="padding-bottom: 200px; padding-top: 100px;">
            <div class="row justify-content-center mb-2">
                <div class="col-md-6 text-center mb-2">
                    <h2>Các giao dịch gần đây được thực hiện</h2>
                    <h5 class="text-uppercase pb_font-15 mb-2 pb_color-dark-opacity-3 pb_letter-spacing-2"><strong>Tại đây, bạn có thể xem các giao dịch gần đây đã thực hiện<span style="font-weight: bold">Đang chờ khai thác</span></strong></h5>
                </div>
            </div>

            <div class="row">
                <small style="color: red;">* Lưu ý - Không thể khai thác khi bảng trống / chỉ chứa một lần chuyển từ phần thưởng hệ thống!</small>
                <table id="lastTransactionsTable" class="table table-hover table-bordered" style="overflow: auto">
                    <thead class="text-right" style="background-image: -webkit-gradient(linear, left bottom, right top, from(#6777ed), to(#81cbec)); background-attachment:fixed; color: #fff">
                        <tr class="text-right">
                            <th class="text-right">ID giao dịch</th>
                            <th class="text-right">người gửi</th>
                            <th class="text-right">người nhận</th>
                            <th class="text-right">Tổng</th>
                        </tr>
                    </thead>
                    <tbody id="tbody" style="background: #fff"></tbody>
                </table>
            </div>
            <script>
                $(document).ready(function () {
                    $('[data-toggle="tooltip"]').tooltip();
                });
            </script>
            <div ng-controller="miningController">
                <div class="row">
                    <p class="col-10"><small>* Bảng được cập nhật theo thời gian thực!</small></p>
                    <div class="col-2" data-toggle="tooltip" title="Bằng cách nhấp vào nút này, bạn có thể kích hoạt tất cả các giao dịch đang chờ phê duyệt">
                        <button id="mineButton" class="button1" style="vertical-align:middle" ng-click="mine()"><span>Thực hiện khai thác</span></button>
                    </div>
                </div>
                <p class="alert alert-light no-data-text" style="outline: 2px dotted #639ce4" ng-if="mineSuccesss">
                    <span style="font-weight: bold;">Việc khai thác đã được thực hiện thành công!</span>Bây giờ các giao dịch đã được hoàn thành và các loại tiền tệ đã được cập nhật trong ví kỹ thuật số.
                </p>
            </div>
        </div>

    </section>
    <!-- ENDs ection -->
    <section class="pb_section overflow-hidden pb_slant-white" id="about">
        <div class="container">
            <div class="row justify-content-center mb-5">
                <div class="col-md-6 text-center mb-5">
                    <h2>Về dự án, Ali và blockchain </h2>
                    <h5 class="text-uppercase pb_font-15 mb-2 pb_color-dark-opacity-3 pb_letter-spacing-2"><strong>Một chút về tôi, rất nhiều về dự án và blockchain</strong></h5>
                </div>
            </div>
            <div class="row">
                <div class="col-md">
                    <div id="pb_faq" class="pb_accordion" data-children=".item">
                        <div class="item">
                            <a data-toggle="collapse" data-parent="#pb_faq" href="#pb_faq1" aria-expanded="false" aria-controls="pb_faq1" class="pb_font-22 py-4">&nbsp;&nbsp;&nbsp;מהו הבלוקצ'יין?</a>
                            <div id="pb_faq1" class="collapse" role="tabpanel">
                                <div class="py-3">
                                    <p>
                                        הרעיון המרכזי העומד מאחורי הטכנולוגיה הוא יצירת מערכת המאפשרת פעילות עסקית באינטרנט ללא צורך בפיקוח של ישות ניהול מרכזית. לדוגמה, העברת כספים בין עמית לעמית ללא צורך בפיקוח או ניהול של גורם חיצוני. עד היום הבנקים שימשו כמפקחים על כל ההעברות הכספיות והם אלה שערבו לערך של המטבעות והשטרות הפיזיים. בפלטפורמות P2P (עמית לעמית) אין גוף חיצוני המפקח על הפעילות העסקית והטכנולוגיה מחליפה את תפקידם של הבנקים.
                                    </p>
                                    <p>
                                        זהו למעשה הבסיס שעומד מאחורי טכנולוגיית הבלוקצ'יין. באמצעות טכנולוגיה זו הרישום הדיגיטלי נשמר במחשבים של כל משתמשי הרשת ללא חשיפת זהותם. הרישום הדיגיטלי כולל מידע על חשבונות המשתמשים ורישום העברות כספים שבוצעו מהחשבונות, כאשר המידע נגיש, שקוף וזמין לכל משתמש אחר, תוך שמירה קפדנית על זהות המשתמשים ופרטיותם.
                                    </p>
                                    <p>
                                        המידע מוצפן ברמה הגבוהה ביותר ומאוחסן בבלוק המצטרף לשרשרת הבלוקים הקיימת. כל בלוק קשור מתמטית לבלוק שלפניו כך שלא ניתן לשנות מידע קיים השמור בבלוקים. כך מקטינים את מעשי התרמית וממזערים משמעותית את הסיכון להונאות שונות. ראוי לציין כי כל בלוק ננעל בתוך פרק זמן נתון, כאשר בביטקוין הפעולה אורכת כעשר דקות. לאחר נעילת המידע וצירוף הבלוק לשרשרת הבלוקים, המערכת מייצרת חתימה דיגיטלית ייחודית שמקורה בבלוק הקודם. לכן, הטכנולוגיה נחשבת לבטוחה וכל משתמש המנסה לשנות פרט מסוים במידע השמור באחד הבלוקים הקודמים יקבל תוצאה אחרת והפעולה שלו תידחה.
                                    </p>
                                    <p>
                                        חשוב להדגיש כי המידע על כל העסקאות נשמר באופן כרונולוגי בטכנולוגיית בלוקצ'יין. לאחר נעילת בלוק בצורה דיגיטלית הוא מצטרף לשרשרת הבלוקים, לכן המערכת נחשבת לבטוחה ואמינה, וכמעט בלתי אפשרי לזייף או לשנות מידע בבלוקים.
                                    </p>
                                    <p>
                                        באמצעות הטכנולוגיה יש לכל המשתמשים גישה לנתונים, אך אין להם יכולת לשלוט במידע השמור. כך ניתן לוותר על פיקוח גורם שלישי על העברת מטבעות וירטואליים בין ארנקים דיגיטליים – חוסכים עמלות, מקצרים זמן ומייעלים את השיטה לטובת הכלל. זו בדיוק הסיבה מדוע בנקים וגופים פיננסים אחרים חוששים מהטכנולוגיה, ורק לאחרונה הם החלו לחקור כיצד מערכות בלוקצ'יין יכולות לסייע להם.
                                    </p>
                                    <p class="text-left">
                                        <em>
                                            נלקח מאתר Crypto Jungle, לקריאה נוספת:
                                            <a href="https://www.cryptojungle.co.il/blog/134">לחץ כאן</a>
                                        </em>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <a data-toggle="collapse" data-parent="#pb_faq" href="#pb_faq2" aria-expanded="false" aria-controls="pb_faq2" class="pb_font-22 py-4">&nbsp;&nbsp;&nbsp;קצת עלי ועל הפרויקט</a>
                            <div id="pb_faq2" class="collapse" role="tabpanel">
                                <div class="py-3">
                                    <p>מור כהן, 27, סטודנט להנדסת תוכנה.</p>
                                    <p>לאחרונה נושא הבלוקצ'יין תפס תאוצה בצורה מדהימה. יותר ויותר הוא נכנס בנושאי שיחה על היתרונות שהוא נותן ועל חברות שהצליחו לקחת את זה צעד אחד קדימה.</p>
                                    <p>כמובן שגם לאזני הגיעו השמועות וכבר הרבה מאוד זמן רציתי לחקור את הנושא ולדעת להתעסק בטכנולוגיה המדוברת. כמו כן, אני תמיד רוצה ומתלהב ללמוד דברים חדשים ולכן החלטתי לא לשחק במגרש הביתי שלי ולקחת את כישורי הJavascript שלי גם צעד אחד קדימה. </p>
                                    <p>
                                        כך התחלתי ללמוד איך nodeJS עובדת ובנוסף גם פריימוורקים כמו express וכלים חדשים כמו PostMan, chartJS, Angular ליצור Api's ועוד..
                                        <br />
                                        כך זה התקדם ותוך זמן קצר בניתי אבטיפוס למערכת הבלוקצ'יין בעזרת הכלים שרכשתי.
                                    </p>
                                    <p class="text-left">
                                        <em>
                                            תיק העבודות שלי:
                                            <a href="http://morc.co.il/">לחץ כאן</a>
                                        </em>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <a data-toggle="collapse" data-parent="#pb_faq" href="#pb_faq3" aria-expanded="false" aria-controls="pb_faq3" class="pb_font-22 py-4">&nbsp;&nbsp;&nbsp;Blockchain - שרשרת בלוקים</a>
                            <div id="pb_faq3" class="collapse" role="tabpanel">
                                <div class="py-3">
                                    <p>
                                        הBlockchain כשמו כן הוא, "שרשרת בלוקים".
                                        כל בלוק יכול להכיל כמות מסוימת של מידע, באופן כללי בלוק יכיל את המידע הבא:
                                        <ul>
                                            <li>
                                                <mark>Block Index</mark>: מספר הבלוק הנוכחי.
                                            </li>
                                            <li>
                                                <mark>Hash</mark>: תמצות (SHA-256) המידע שמרכיב את הבלוק כלומר כל העסקאות שמרכיבות את הבלוק תומצתו לפלט אחד, הפלט הנ"ל. שימו לב למספר האפסים בתחילת פלט התמצות-ככל שישנם יותר אפסים הקושי לפיצוח הבלוק(משמע עיבוד העסקאות) גדול יותר, קושי זה מתעדכן באופן אוטומטי בהתאם לסה"כ כוח החישוב ברשת המטבע בכל 2016 בלוקים (ברשת ביטקוין).
                                            </li>
                                            <li>
                                                <mark>Previous block</mark>: תמצות (SHA-256) המידע של הבלוק הקודם. כל בלוק חייב להכיל את התמצות של הבלוק שנעשה לפניו. זו הדרך ליצור חותמת זמן ולשמור על סדר כרונולוגי שאינו ניתן לשינוי. הקשר הזה מכונה שרשרת הבלוקים.
                                            </li>
                                            <li>
                                                <mark>Time</mark>: חותמת זמן יצירת הבלוק.
                                            </li>
                                            <li>
                                                <mark>Transactions</mark>: כל העסקאות שמחכות להוכחת עבודה.
                                            </li>
                                            <li>
                                                <mark>Total Coins</mark>: סה"כ כל המטבעות שהועברו בעסקאות המרכיבות את הבלוק.
                                            </li>
                                            <li>
                                                <mark>Size</mark>: גודל/משקל הבלוק בקילובייטים.
                                            </li>
                                            <li>
                                                <mark>Nonce</mark>: מספר ייחודי (32-bit) אותו יוצר הכורה בכדי לפצח את הבלוק. הפיצוח הוא למעשה יצירת תמצות המתחיל בהמון אפסים ותואם לתמצות הבלוק. מספר ה Nonce הנוכחי מייצג מספר לא ידוע של ניסיונות בכדי להגיע להתאמה הדרושה שהיא ה Nonce הנכון. כלומר, פיצוח הבלוק.
                                            </li>
                                            <li>
                                                <mark>NetworkNodes</mark>: מפה הכוללת את שאר המחשבים ברשת.
                                            </li>
                                        </ul>
                                    </p>
                                    <p class="text-left">
                                        <em>
                                            לקריאה מעמיקה יותר:
                                            <a href="https://dev.to/damcosset/blockchain-what-is-in-a-block-48jo">לחץ כאן</a>
                                        </em>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <a data-toggle="collapse" data-parent="#pb_faq" href="#pb_faq4" aria-expanded="false" aria-controls="pb_faq4" class="pb_font-22 py-4">&nbsp;&nbsp;&nbsp;מפתח פרטי ומפתח ציבורי - privateKey & publicKey</a>
                            <div id="pb_faq4" class="collapse" role="tabpanel">
                                <div class="py-3">
                                    <p>
                                        <mark>המפתח הפרטי</mark> הוא סוג של מחרוזת/מס' ייחודי שניתן למשתמש בעת רישומו לרשת הבלוקצ'יין.
                                        <br />
                                        ביחד עם זאת, קיים מפתח ציבורי בדומה למפתח הפרטי - מפתח זה נגזר מהמפתח הפרטי באמצעות פונקציית גיבוב כלשהי המשתמשת בפרוטוקול הצפנה כגון sha256/RSA.
                                        <br />
                                        מה שמיוחד במפתחות אלה הוא שניתן לפענח את המפתח הציבורי בעזרת המפתח הפרטי - אך כמעט בלתי אפשרי לפענח את המפתח הפרטי בעזרת המפתח הציבורי. כלומר התהליך הוא חד כיווני.

                                    </p>
                                    <p>
                                        <mark>המפתח הציבורי</mark> הוא ה"מזהה" של המשתמש ברשת הבלוקצ'יין.
                                        <br />
                                        הוא גלוי לכל שאר המשתמשים ברשת, כך שכאשר משתמש מסוים ירצה לTạo một sự chuyển đổi של מטבעות דיגיטלים לארנק הדיגיטלי שלכם הוא יצטרך לזהות אתכם באמצעותו.
                                        <br />
                                        <mark>מטרת המפתח הפרטי</mark> היא ביצוע פעולות בחשבון שלכם, כמו למשל העברת מטבעות דיגיטלים מהארנק הפרטי שלכם לארנק של משתמש אחר.
                                        בשביל לTạo một sự chuyển đổi שכזו המערכת תצטרך לבצע אימות ע"י כך שNgười gửi מזין למערכת את המפתח הפרטי והציבורי שלו, המערכת מבצעת פענוח באמצעות פונקצית ההצפנה, ולאחר שהיא רואה שהמפתח הציבורי אכן מתאים למפתח הפרטי - תתאפשר ההעברה בתנאי שיש לשולח מספיק מטבעות.
                                    </p>
                                    <p>
                                        <h5 style="color: red">אזהרה - אין לשתף את המפתח הפרטי שלך עם אף אחד, מפתח זה הוא סודי!</h5>
                                        <span style="color: red">במידה ומפתח זה יגיע לידיים הלא נכונות - אותו אדם יוכל לגנוב לך מטבעות וירטואלים!</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <footer class="pb_footer bg-light" role="contentinfo">
        <div class="container">

            <div class="row">
                <div class="col text-center">
                    <div class="col">
                        <ul class="list-inline" style="padding-left: 50px;">
                            <li class="list-inline-item"><a href="#" class="p-2"><i class="fab fa-facebook-f"></i></a></li>
                            <li class="list-inline-item"><a href="#" class="p-2"><i class="fab fa-github"></i></a></li>
                            <li class="list-inline-item"><a href="#" class="p-2"><i class="fab fa-linkedin-in"></i></a></li>
                        </ul>
                    </div>
                    <p class="pb_font-14">
                        <a href="index.html">JewCOIN</a>
                        <br>
                        תוכנת ועוצב ע"י מור כהן - <a href="http://morc.co.il/">תיק עבודות</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- loader -->
    <div id="pb_loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" /><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#1d82ff" /><div style="position: fixed; z-index: 100000; top:39%; right: 44%;"><img src="./assets/css/logo_blockchain_scrolled - Copy - Copy.png"><img /></div></svg></div>

    <script src="./assets/js/jquery.min.js"></script>

    <script src="./assets/js/popper.min.js"></script>
    <script src="./assets/js/bootstrap.min.js"></script>
    <script src="./assets/js/slick.min.js"></script>
    <script src="./assets/js/jquery.waypoints.min.js"></script>
    <script src="./assets/js/jquery.easing.1.3.js"></script>
    <script src="./assets/js/main.js"></script>
    <script>
        window.app = angular.module('BlockExplorer', []);
        app.controller('searchInBlockchainController', function ($scope, $http) {

            $scope.block = null;
            $scope.transaction = null;
            $scope.addressData = null;
            $scope.initialSearchMade = false;

            $scope.fetchBlock = function (blockHash) {
                $http.get(`/block/${blockHash}`)
                    .then(response => {
                        $scope.block = response.data.block;
                        $scope.transaction = null;
                        $scope.addressData = null;
                    });
            };

            $scope.fetchTransaction = function (transactionId) {
                $http.get(`/transaction/${transactionId}`)
                    .then(response => {
                        $scope.transaction = response.data.transaction;
                        $scope.block = null;
                        $scope.addressData = null;
                    });
            };

            $scope.fetchAddressData = function (address) {
                $http.get(`/address/${address}`)
                    .then(response => {
                        $scope.addressData = response.data.addressData;
                        if (!$scope.addressData.addressTransactions.length) $scope
                            .addressData = null;
                        $scope.block = null;
                        $scope.transaction = null;
                    });
            };
            $scope.search = function (searchValue) {
                $scope.initialSearchMade = true;
                if ($scope.searchType === 'block') {
                    $scope.fetchBlock(searchValue);
                }
                else if ($scope.searchType === 'transaction') {
                    $scope.fetchTransaction(searchValue);
                }
                else if ($scope.searchType === 'address') {
                    $scope.fetchAddressData(searchValue);
                }
            };
        });

        ////////////////////////////////////////////////////////////////////
        app.controller('walletController', function ($scope, $http) {
            $scope.addressData = null;
            $scope.initialSearchMade = false;
            $scope.dis = false;

            $scope.fetchAddressData = function (address) {
                $http.get(`/address/${address}`)
                    .then(response => {
                        $scope.addressData = response.data.addressData;
                        if ($scope.addressData) {
                            $scope.dis = !$scope.dis;//disable button
                        }
                        if (!$scope.addressData.addressTransactions.length) $scope
                            .addressData = null;
                        $scope.block = null;
                        $scope.transaction = null;
                    });
            };
            $scope.search = function (searchValue) {
                $scope.initialSearchMade = true;
                $scope.fetchAddressData(searchValue);
            };


        });

        ///////////////////////////////////////////////////////////////////
        app.controller('transactionController', function ($scope, $http) {

            $scope.acceptedTransaction = null;
            $scope.declineTransaction = null;

            $scope.transactionCoins = function (amountToTransfer, privKey, pubKey, pubKeyOfRecipient) {

                $http({
                    url: '/transaction/broadcast',
                    method: "POST",
                    data: {
                        "amount": 50,
                        "sender": localStorage.getItem("key2"),
                        "recipient": pubKeyOfRecipient,
                        "privKey": localStorage.getItem("key1")
                    }
                })
                    .then(function (response) {
                        //console.log("success");
                        $('#mineButton').attr("disabled", false);
                        $scope.acceptedTransaction = true;
                        $scope.declineTransaction = false;
                        //console.log(response.data.note);
                        if (response.data.note === false) {
                            $scope.acceptedTransaction = false;
                            $scope.declineTransaction = true;
                            console.log(response.data.note);
                        }
                        //console.log($scope.acceptedTransaction);
                    },
                        function (response) {
                            $scope.acceptedTransaction = false;
                            $scope.declineTransaction = true;
                            //console.log("failed");
                        });
            }

        });

        ///////////////////////////////////////////////////////////////////
        app.controller('pendingTransactionsController', function ($scope, $http) {

            $scope.init = function () {
                $http.get('/pendingTransactions')
                    .then(response => {
                        $scope.pendingTransactions = response.data.pendingTransactions;
                    });
            };

            $scope.init();

        });

        ///////////////////////////////////////////////////////////////////
        app.controller('miningController', function ($scope, $http, $timeout) {
            $scope.mineSuccesss = null;
            $scope.mine = function () {
                var key1 = prompt("Để kích hoạt chức năng, hãy nhập khóa riêng của bạn:", "");
                var key2 = prompt("Để kích hoạt chức năng Nhập khóa công khai của bạn:", "");
                
                key1 = localStorage.getItem("key1")
                key2 = localStorage.getItem("key2")

                $http({
                    url: '/hashKeys',
                    method: "POST",
                    data: {
                        "key1": key1,
                        "key2": key2
                    }
                })
                    .then(function (response) {
                        if (response.data.note === false) {
                            alert("Các phím không tương thích");
                        }
                        else {
                            $http.get('/mine')
                                .then(response => {//mining sccess
                                    $("#lastTransactionsTable td").remove();
                                    $.get('/emitMiningSuccess', (data, status) => {//http request via JQuery
                                        console.log(data);
                                    });
                                    $scope.mineSuccesss = true;
                                    $timeout(function () {//remove 'mining success' message
                                        $scope.mineSuccesss = false;
                                    }, 4000);
                                    $timeout(function () {
                                        location.reload();
                                    }, 5000);
                                });
                        }
                    },
                        function (response) {
                        });

            };

        });


        ///////////////////////////////////////////////////////////////////
        app.controller('inviteController', function ($scope, $http) {

            $scope.checkeys = function (email) {
                var key1 = prompt("Để kích hoạt chức năng, hãy nhập khóa riêng của bạn:", "");
                var key2 = prompt("Để kích hoạt chức năng Nhập khóa công khai của bạn:", "");

                
                $http({
                    url: '/hashKeys',
                    method: "POST",
                    data: {
                        "key1": key1,
                        "key2": key2
                    }
                })
                    .then(function (response) {
                        if (response.data.note === false) {
                            alert("מפתחות לא תואמים");
                        }
                        else {
                            $http({
                                url: '/sendInvitation',
                                method: "POST",
                                data: {
                                    email: email,
                                    sender: key2
                                }
                            })
                                .then(function (response) {
                                    if (response.data.note === true) {
                                        alert(`הזמנה נשלחה בהצלחה \n כמות הזמנות שנותרו ברשותך: ${response.data.numOfInv}`);
                                    }
                                    else if (response.data.note === false) {
                                        alert('אין ברשותך הזמנות');
                                    }
                                    else if (response.data.note === 'not valid email') {
                                        alert('נא להזין כתובת אימייל חוקית!');
                                    }
                                });
                        }
                    });

            };

        });

    </script>
    

    <script src="/socket.io/socket.io.js"></script>
    <script src="sockets.js"></script>
</body>
</html>